<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <title>게시판</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    </head>    
    <body>
    
        <table class="table table-hover"  style="width: 80%; margin: auto;">
            <div class="table"  style="width: 80%; margin: auto;">
                <a href="/bbs/form" ><h4><strong>글쓰기</strong></h4></a>
            </div>
            <thread>
                <tr>
                    <th>번호</th>
                    <th>제목</th>
                    <th>등록자</th>
                    <th>등록일</th>
                    <th>조회수</th>
                </tr>
            </thread>
            <tbody>
            <%
                console.log("list start ============");
                console.log("rows : " +JSON.stringify(rows.rows));
                console.log("rows : " + rows.rows.length);
                var column;
                // for(var i=0;i<rows.rows.length;i++){
                //     column=rows.rows[i];
                //     console.log(column[0]);
                //     if(column[4]==1){    // ok 확인
                for (var i=0; i<rows.length; i++) {
                    column = rows[i];

            %>
                    <tr>
                        <td><a href='/bbs/read_count?brdno=<%=column[0]%>'><%=column[0]%></a></td>
                        <td><a href='/bbs/read_count?brdno=<%=column[0]%>'><%=column[1]%></a></td>
                        <td><%=column[2]%></td>
                        <td><%=column[3]%></td>
                        <td><%=column[5]%></td>
                    </tr>
            <%
                    }
                }
            %>
            </tbody>
            <tfoot>
                <tr>
                    <td colspan="5" align="center">
                        <% if(currentPage > firstPage){ %>
                        <a href="/bbs/list?currentPage=<%=currentPage-1%>"> < </a>
                        <% }else{ %>
                        <a href="javascript:alert('처음페이지입니다.')"> < </a>
                        <% } %>

                        <% for(var i=firstPage;i<=lastPage;i++){ %>
                            <% if(i>totalPage)  break;%>
                            <a <% if(currentPage == i){%> class="numStyle"<%}%> href="/bbs/list?currentPage=<%=i%>">[<%=i%>]</a>
                        <% } %>
                        <%if( currentPage < totalPage ) {%>
                            <a href="/bbs/list?currentPage=<%=currentPage+1%>"> > </a>
                        <% }else{ %>
                            <a href="javascript:alert('마지막페이지 입니다.')"> > </a>
                        <% } %>
                    </td>
                </tr>
            </tfoot>
        </table>
        <form action="/bbs/search" class="form"  style="width: 50%; margin: auto;">
            <input type="radio" name="choice" value="TITLE" onclick="getChoice(event)" checked>제목 검색<br>
            <input type="radio" name="choice" value="WRITER" onclick="getChoice(event)">등록자 검색<br>
            <input type="radio" name="choice" value="CONTENT" onclick="getChoice(event)">내용 검색<br>
            <input type="radio" name="choice" value="TITLE_CONTENT" onclick="getChoice(event)">제목 + 내용 검색<br>
            검색할 내용을 입력하세요 : <input type="text" name="search">
            <input type="submit" value="검색">
        </form>
        <br>
        
        <form action="../../../upload" method="post" enctype="multipart/form-data" class="upload"  style="width: 50%; margin: auto;">
            <h3>파일 업로드 기능</h3>
            <input type="file" name="userfile">
            <input type="submit" value="업로드">
        </form>

       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    </body>
</html>